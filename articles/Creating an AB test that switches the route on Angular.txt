Creating an AB test that switches the route on Angular
<h2>Issue</h2>
<p>Angular JS button links are sometimes tied to the a specific route defined on the router file. However, sometimes we would like to AB test links on those buttons. Modifying those button links with Visual Editor changes or code in the Code Editor or Variation Custom JS code might not be possible, as the processing of this links depends on the router configuration of your app.</p>
<h2>Solution</h2>
<p>The solution is to make the router conditionally select another route depending on the variation that has been selected. For this we would need to edit the router configuration and build the application again. </p>
<p>For enabling this, we are going to make use of the <a href="https://support.convert.com/hc/en-us/articles/204506359-Reading-Triggered-Experiment-Data-for-Using-it-in-Third-Party-Systems" target="_blank" rel="noopener">on-page javascript api</a> that is included and deployed with the Convert tracking code, on any page that includes it.<br><br>So, here we are going to provide some example code:</p>
<p class="codepen" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid black; margin: 1em 0; padding: 1em;" data-height="300" data-theme-id="31058" data-default-tab="js" data-user="gcrewe" data-slug-hash="Bvegzp" data-pen-title="Angular Router AB Test">See the Pen <a href="https://codepen.io/gcrewe/pen/Bvegzp/"> Angular Router AB Test</a> by Convert.com (<a href="https://codepen.io/gcrewe">@gcrewe</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<p><br>This code queries the Convert <a href="https://support.convert.com/hc/en-us/articles/204506359-Reading-Triggered-Experiment-Data-for-Using-it-in-Third-Party-Systems">on-page javascript API</a>, for information regarding the variation with its id <em>123456789</em> if it has been selected for the visitor. The Convert script should have selected the variation randomly for the visitor at page load or when triggered:<br><br><strong><em>convert.currentData.experiments[123456789];<br><br></em></strong>If it returns undefined, the second route will be taken, which would correspond to the original variation.<br><br>You can read where to find the experiment and variation id's in the <a href="https://support.convert.com/hc/en-us/articles/204506639-Where-Do-I-Find-my-Experiment-and-Variation-IDs">following article</a>. </p>
<script async="" src="https://static.codepen.io/assets/embed/ei.js"></script>